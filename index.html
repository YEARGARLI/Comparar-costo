<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparador IA Avanzado</title>

<style>
body {
    background: #f2f4f7;
    font-family: Arial;
}
.container {
    width: 95%;
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 20px;
    margin-top: 20px;
    border-radius: 14px;
    box-shadow: 0 0 12px #00000030;
}
h2 {
    text-align: center;
}
textarea {
    width: 100%;
    height: 80px;
    margin-top: 10px;
    padding: 10px;
}
button {
    width: 100%;
    padding: 12px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    margin-top: 20px;
}
button:hover {
    background: #005fcc;
}
#resultado {
    white-space: pre-wrap;
    background: #f7f7f7;
    padding: 15px;
    border-radius: 10px;
    margin-top: 20px;
}
.preview {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
}
.preview img {
    width: 45%;
    border-radius: 10px;
}
</style>
</head>

<body>

<div class="container">
<h2>Comparador Avanzado con Inteligencia Artificial</h2>

<label>Imagen 1:</label>
<input type="file" id="img1" accept="image/*"><br><br>

<label>Imagen 2:</label>
<input type="file" id="img2" accept="image/*"><br><br>

<div class="preview">
    <img id="prev1">
    <img id="prev2">
</div>

<label>Links opcionales para analizar:</label>
<textarea id="links" placeholder="Pega links aqu칤..."></textarea>

<button onclick="analizarIA()">Analizar con IA</button>

<div id="resultado"></div>

<button onclick="descargarPDF()">Descargar PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
let imgData1 = "";
let imgData2 = "";
let analisisFinal = "";

// Cargar im치genes
document.getElementById("img1").addEventListener("change", e => {
    const r = new FileReader();
    r.onload = () => { imgData1 = r.result; document.getElementById("prev1").src = r.result; }
    r.readAsDataURL(e.target.files[0]);
});
document.getElementById("img2").addEventListener("change", e => {
    const r = new FileReader();
    r.onload = () => { imgData2 = r.result; document.getElementById("prev2").src = r.result; }
    r.readAsDataURL(e.target.files[0]);
});

// IA de an치lisis
async function analizarIA() {
    if (!imgData1 || !imgData2) {
        alert("Sube las dos im치genes");
        return;
    }

    const links = document.getElementById("links").value;

    document.getElementById("resultado").textContent = "Analizando con IA, espera...";

    const OPENAI_API_KEY = "TU_API_KEY_AQU칈";  // 游녣 Reemplazar

    const prompt = `
Analiza estas dos im치genes y extrae la siguiente informaci칩n:

- Precio (si aparece)
- Capacidad
- Marca
- Modelo
- Caracter칤sticas importantes
- Diferencias clave
- Conclusi칩n: 쯖u치l conviene m치s y por qu칠?

Tambi칠n analiza estos links si existen:
${links}

Devuelve todo en un formato claro y con subt칤tulos.
`;

    const body = {
        model: "gpt-4o-mini",
        messages: [
            { role: "user", content: [
                { type: "text", text: prompt },
                { type: "input_image", image_url: imgData1 },
                { type: "input_image", image_url: imgData2 }
            ]}
        ]
    };

    let resp = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
        },
        body: JSON.stringify(body)
    });

    let data = await resp.json();

    analisisFinal = data.choices[0].message.content;

    document.getElementById("resultado").textContent = analisisFinal;
}

// Descargar PDF
function descargarPDF() {
    if (!analisisFinal) {
        alert("Primero analiza las im치genes");
        return;
    }

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF("p", "mm", "a4");

    pdf.setFontSize(16);
    pdf.text("An치lisis Avanzado de Im치genes", 10, 10);

    pdf.setFontSize(10);
    pdf.text(analisisFinal, 10, 20);

    pdf.addImage(imgData1, "JPEG", 10, 150, 80, 80);
    pdf.addImage(imgData2, "JPEG", 110, 150, 80, 80);

    pdf.save("comparacion_IA.pdf");
}
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparador IA Avanzado</title>

<style>
body {
    background: #f2f4f7;
    font-family: Arial;
}
.container {
    width: 95%;
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 20px;
    margin-top: 20px;
    border-radius: 14px;
    box-shadow: 0 0 12px #00000030;
}
h2 {
    text-align: center;
}
textarea {
    width: 100%;
    height: 80px;
    margin-top: 10px;
    padding: 10px;
}
button {
    width: 100%;
    padding: 12px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    margin-top: 20px;
}
button:hover {
    background: #005fcc;
}
#resultado {
    white-space: pre-wrap;
    background: #f7f7f7;
    padding: 15px;
    border-radius: 10px;
    margin-top: 20px;
}
.preview {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
}
.preview img {
    width: 45%;
    border-radius: 10px;
}
</style>
</head>

<body>

<div class="container">
<h2>Comparador Avanzado con Inteligencia Artificial</h2>

<label>Imagen 1:</label>
<input type="file" id="img1" accept="image/*"><br><br>

<label>Imagen 2:</label>
<input type="file" id="img2" accept="image/*"><br><br>

<div class="preview">
    <img id="prev1">
    <img id="prev2">
</div>

<label>Links opcionales para analizar:</label>
<textarea id="links" placeholder="Pega links aqu칤..."></textarea>

<button onclick="analizarIA()">Analizar con IA</button>

<div id="resultado"></div>

<button onclick="descargarPDF()">Descargar PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
let imgData1 = "";
let imgData2 = "";
let analisisFinal = "";

// Cargar im치genes
document.getElementById("img1").addEventListener("change", e => {
    const r = new FileReader();
    r.onload = () => { imgData1 = r.result; document.getElementById("prev1").src = r.result; }
    r.readAsDataURL(e.target.files[0]);
});
document.getElementById("img2").addEventListener("change", e => {
    const r = new FileReader();
    r.onload = () => { imgData2 = r.result; document.getElementById("prev2").src = r.result; }
    r.readAsDataURL(e.target.files[0]);
});

// IA de an치lisis
async function analizarIA() {
    if (!imgData1 || !imgData2) {
        alert("Sube las dos im치genes");
        return;
    }

    const links = document.getElementById("links").value;

    document.getElementById("resultado").textContent = "Analizando con IA, espera...";

    const OPENAI_API_KEY = "TU_API_KEY_AQU칈";  // 游녣 Reemplazar

    const prompt = `
Analiza estas dos im치genes y extrae la siguiente informaci칩n:

- Precio (si aparece)
- Capacidad
- Marca
- Modelo
- Caracter칤sticas importantes
- Diferencias clave
- Conclusi칩n: 쯖u치l conviene m치s y por qu칠?

Tambi칠n analiza estos links si existen:
${links}

Devuelve todo en un formato claro y con subt칤tulos.
`;

    const body = {
        model: "gpt-4o-mini",
        messages: [
            { role: "user", content: [
                { type: "text", text: prompt },
                { type: "input_image", image_url: imgData1 },
                { type: "input_image", image_url: imgData2 }
            ]}
        ]
    };

    let resp = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${OPENAI_API_KEY}`
        },
        body: JSON.stringify(body)
    });

    let data = await resp.json();

    analisisFinal = data.choices[0].message.content;

    document.getElementById("resultado").textContent = analisisFinal;
}

// Descargar PDF
function descargarPDF() {
    if (!analisisFinal) {
        alert("Primero analiza las im치genes");
        return;
    }

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF("p", "mm", "a4");

    pdf.setFontSize(16);
    pdf.text("An치lisis Avanzado de Im치genes", 10, 10);

    pdf.setFontSize(10);
    pdf.text(analisisFinal, 10, 20);

    pdf.addImage(imgData1, "JPEG", 10, 150, 80, 80);
    pdf.addImage(imgData2, "JPEG", 110, 150, 80, 80);

    pdf.save("comparacion_IA.pdf");
}
</script>

</body>
</html>

